(function(a){a.jSlot=function(c,b){var d=this;d.$el=a(c);d.el=c;d.$el.data("jSlot",d);d.init=function(){d.options=a.extend({},a.jSlot.defaultOptions,b);d.setup();d.bindEvents()};a.jSlot.defaultOptions={spinner:"",spinEvent:"click",onStart:a.noop,onEnd:a.noop,time:7000,loops:6};d.randomRange=function(e,f){return Math.floor(Math.random()*(1+f-e))+e};d.isSpinning=false;d.spinSpeed=0;d.doneCount=0;d.$liHeight=0;d.$liWidth=0;d.SlotClass=null;d.setup=function(){var e=d.$el;var f=e.find("li").first();d.$liHeight=f.outerHeight();d.$liWidth=f.outerWidth();d.liCount=d.$el.children().length;d.listHeight=d.$liHeight*d.liCount;d.increment=(d.options.time/d.options.loops)/d.options.loops;e.css("position","relative");f.clone().appendTo(e);d.$wrapper=e.wrap('<div class="jSlot-wrapper"></div>').parent();d.$el.remove();d.SlotClass=new d.Slot()};d.bindEvents=function(){a(d.options.spinner).bind(d.options.spinEvent,function(e){if(!d.isSpinning){d.play()}})};d.Slot=function(){this.spinSpeed=0;this.el=d.$el.clone().appendTo(d.$wrapper)[0];this.$el=a(this.el);this.loopCount=0;this.number=0};d.Slot.prototype={spinEm:function(){var e=this;e.$el.css("top",-d.listHeight).animate({top:"0px"},e.spinSpeed,"linear",function(){e.lowerSpeed()})},lowerSpeed:function(){this.spinSpeed+=d.increment;this.loopCount++;if(this.loopCount<d.options.loops){this.spinEm()}else{this.finish()}},finish:function(){var e=this;var g=d.randomRange(1,d.liCount);var f=-((d.$liHeight*g)-d.$liHeight);var h=((this.spinSpeed*0.5)*(d.liCount))/g;e.$el.css("top",-d.listHeight).animate({top:f},h,function(){if(a.isFunction(d.options.onEnd)){d.options.onEnd(g)}})}};d.play=function(){d.isSpinning=true;if(a.isFunction(d.options.onStart)){d.options.onStart()}d.SlotClass.spinSpeed=0;d.SlotClass.loopCount=0;d.SlotClass.spinEm()};d.init()};a.fn.jSlot=function(b){if(this.length){el=this[0];el.slot=(new a.jSlot(this,b));el.playSlot=el.slot.play;return el}}})(jQuery);